<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>StreetKace — Masculino</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="masculino.css">
    
</head>

<body>
    <div id="header-container"></div>

    <main class="container py-5">
        <h1 class="mb-4 fw-bold title-gradient">Roupas Masculinas</h1>

        <div id="produtos-container" class="row g-4">
            </div>
    </main>

    <footer class="py-4">
        <div class="container">
            <div class="row align-items-center gy-3">
                <div class="col-12 col-md-4">
                    <h5 class="mb-1" style="color:var(--warm2)">KaceWear</h5>
                    <small class="text-secondary">&copy; 2025 Todos os direitos reservados</small>
                </div>
                <div class="col-12 col-md-4">
                    <ul class="nav justify-content-md-center footer-links">
                        <li class="nav-item"><a class="nav-link px-2" href="../principal/principal.html">Início</a></li>
                        <li class="nav-item"><a class="nav-link px-2" href="../catalogo.html">Catálogo</a></li>
                        <li class="nav-item"><a class="nav-link px-2" href="../sobre/sobre.html">Sobre</a></li>
                        <li class="nav-item"><a class="nav-link px-2" href="../contato.html">Contato</a></li>
                    </ul>
                </div>
                <div class="col-12 col-md-4 text-md-end footer-socials">
                    <a href="#" class="me-3"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="me-3"><i class="fa-brands fa-x-twitter"></i></a>
                    <a href="#"><i class="fa-brands fa-facebook"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
    <link rel="stylesheet" href="../../cart.css">
    <script src="../../cart-drawer.js" defer></script>

    <script type="module">
        const MODAL_BASE = '../modal/';

        const ensureModalLoaded = async () => {
            if (!document.getElementById('comprarModal')) {
                const res = await fetch(MODAL_BASE + 'modal.html', { cache: 'no-store' });
                if (!res.ok) { console.error('Modal HTML não encontrado:', res.status, MODAL_BASE); return null; }
                const html = await res.text();
                document.body.insertAdjacentHTML('beforeend', html);
                if (!document.getElementById('modal-css')) {
                    const link = document.createElement('link');
                    link.id = 'modal-css';
                    link.rel = 'stylesheet';
                    link.href = MODAL_BASE + 'modal.css';
                    document.head.appendChild(link);
                }
            }
            return import(MODAL_BASE + 'modal.js');
        };

        const getProductFromCard = (card) => ({
            title: card.querySelector('.card-title')?.textContent.trim() || '',
            priceStr: card.querySelector('.price')?.textContent.trim() || 'R$ 0,00',
            img: card.querySelector('img.card-img-top')?.src || ''
        });

        // Delegação para todos os .btn-comprar (presentes/futuros)
        document.addEventListener('click', async (e) => {
            const btn = e.target.closest('.btn-comprar');
            if (!btn) return;
            e.preventDefault();
            const card = btn.closest('.card');
            const product = getProductFromCard(card);
            const mod = await ensureModalLoaded();
            if (mod?.openComprarModal) {
                mod.openComprarModal(product);
            } else {
                console.error('modal.js não exporta openComprarModal');
            }
        });
    </script>
    
    <script src="masculino.js" defer></script>

    <script src="../../components/header.js"></script>
    <script src="../../global.js" defer></script>
    <script src="../../cart.js" defer></script>
</body>

</html>